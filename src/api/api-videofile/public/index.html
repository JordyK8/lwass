
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<h1> Simple form</h1>
<form action="http://localhost:3000/api/formSubmit" method="post" enctype="multipart/form-data">
    <input type="string" name="name" placeholder="name">
    <input type="email" name="email" placeholder="email">
    <input type="number" name="age" placeholder="age">
    <input type="file" id="myFile" name="file">
    <input type="submit" value="submit">
</form>

<ul id="musicList"></ul>
<ul id="newMusicList"></ul>
<div id="waveform"></div>
<script src="https://unpkg.com/wavesurfer.js"></script>
<script>

async function searchMusic() {
    const name = document.getElementById('name');
    const name = document.getElementById('email');
    const name = document.getElementById('age');
    const response = await postData('http://localhost:3000/api/form',{  name, email, age })
    response.forEach((item) => {
        if(item){
        let li = document.createElement('li')
        li.textContent = `${item.title} - ${item.artist}`
        li.addEventListener('click', (e) => {
            getAudio('http://localhost:3000/music/play', { data: e.target.textContent })
        })
        document.getElementById('musicList').appendChild(li)
        }
    })
}


    // Example POST method implementation:
async function postData(url, data) {
  // Default options are marked with *
  const response = await fetch(url, {
    method: 'POST', // *GET, POST, PUT, DELETE, etc.
    mode: 'cors', // no-cors, *cors, same-origin
    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
    credentials: 'same-origin', // include, *same-origin, omit
    headers: {
      'Content-Type': 'application/json'
      // 'Content-Type': 'application/x-www-form-urlencoded',
    },
    redirect: 'follow', // manual, *follow, error
    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
    body: JSON.stringify( data ) // body data type must match "Content-Type" header
  });
  return response.json(); // parses JSON response into native JavaScript objects
}

    
</script>
</body>
</html>
